-- CREATE DATABASE IF NOT EXISTS indonesia_2;

-- \connect indonesia_2

DROP TABLE IF EXISTS users CASCADE;
DROP TABLE IF EXISTS offices CASCADE;
DROP TABLE IF EXISTS regencies CASCADE;
DROP TABLE IF EXISTS districts CASCADE;
DROP TABLE IF EXISTS provinces CASCADE;
-- DROP TABLE IF EXISTS sub_districts CASCADE;

-- create 'provinces' table
CREATE TABLE IF NOT EXISTS provinces (
	id serial PRIMARY KEY,
  name VARCHAR (255) UNIQUE NOT NULL,
  created_at timestamp DEFAULT CURRENT_TIMESTAMP,
  updated_at timestamp DEFAULT CURRENT_TIMESTAMP,
  deleted_at timestamp
);

-- create 'regencies' table
CREATE TABLE IF NOT EXISTS regencies (
	id serial PRIMARY KEY,
  province_id integer,
  name VARCHAR (255) UNIQUE NOT NULL,
  created_at timestamp DEFAULT CURRENT_TIMESTAMP,
  updated_at timestamp DEFAULT CURRENT_TIMESTAMP,
  deleted_at timestamp ,
  FOREIGN KEY (province_id)
  REFERENCES provinces(id)
  ON DELETE CASCADE
);
CREATE INDEX province_id_index
ON regencies(province_id);


-- create 'districts' table
CREATE TABLE IF NOT EXISTS districts (
	id serial PRIMARY KEY,
  regency_id integer,
  name VARCHAR (255) UNIQUE NOT NULL,
  created_at timestamp DEFAULT CURRENT_TIMESTAMP,
  updated_at timestamp DEFAULT CURRENT_TIMESTAMP,
  deleted_at timestamp ,
  FOREIGN KEY (regency_id)
  REFERENCES regencies(id)
  ON DELETE CASCADE
);
CREATE INDEX regency_id_index
ON districts(regency_id);


-- create 'offices' table
CREATE TABLE IF NOT EXISTS offices (
	id serial PRIMARY KEY,
  district_id integer,
  name VARCHAR (255) UNIQUE NOT NULL,
  created_at timestamp DEFAULT CURRENT_TIMESTAMP,
  updated_at timestamp DEFAULT CURRENT_TIMESTAMP,
  deleted_at timestamp ,
  FOREIGN KEY (district_id)
  REFERENCES districts(id)
  ON DELETE CASCADE
);
CREATE INDEX offices_id_index
ON offices(district_id);

-- create 'users' table
CREATE TABLE IF NOT EXISTS users (
	id serial PRIMARY KEY,
  district_id integer,
  first_name VARCHAR (255) NOT NULL,
  last_name VARCHAR (255) NOT NULL,
  email VARCHAR (255) UNIQUE NOT NULL,
  password VARCHAR (255) NOT NULL,
  created_at timestamp DEFAULT CURRENT_TIMESTAMP,
  updated_at timestamp DEFAULT CURRENT_TIMESTAMP,
  deleted_at timestamp ,
  FOREIGN KEY (district_id)
  REFERENCES districts(id)
  ON DELETE CASCADE
);
CREATE INDEX users_id_index
ON users(district_id);

BEGIN WORK;
LOCK TABLE provinces IN ACCESS EXCLUSIVE MODE;
INSERT INTO provinces VALUES
  ('11', 'ACEH'),
  ('12', 'SUMATERA UTARA'),
  ('32', 'JAWA BARAT'),
  ('33', 'JAWA TENGAH'),
  ('34', 'DI YOGYAKARTA'),
  ('35', 'JAWA TIMUR'),
  ('73', 'SULAWESI SELATAN');
COMMIT WORK;

BEGIN WORK;
LOCK TABLE regencies IN ACCESS EXCLUSIVE MODE;
INSERT INTO regencies VALUES
  ('1101', '11', 'KABUPATEN SIMEULUE'),
  ('1102', '11', 'KABUPATEN ACEH SINGKIL'),
  ('1103', '11', 'KABUPATEN ACEH SELATAN'),

  ('1273', '12', 'KOTA PEMATANG SIANTAR'),
  ('1274', '12', 'KOTA TEBING TINGGI'),
  ('1275', '12', 'KOTA MEDAN'),

  ('3201', '32', 'KABUPATEN BOGOR'),
  ('3202', '32', 'KABUPATEN SUKABUMI'),
  ('3203', '32', 'KABUPATEN CIANJUR'),

  ('3301', '33', 'KABUPATEN CILACAP'),
  ('3302', '33', 'KABUPATEN BANYUMAS'),
  ('3303', '33', 'KABUPATEN PURBALINGGA'),

  ('3401', '34', 'KABUPATEN KULON PROGO'),
  ('3402', '34', 'KABUPATEN BANTUL'),
  ('3403', '34', 'KABUPATEN GUNUNG KIDUL'),

  ('3501', '35', 'KABUPATEN PACITAN'),
  ('3502', '35', 'KABUPATEN PONOROGO'),
  ('3503', '35', 'KABUPATEN TRENGGALEK'),

  ('7301', '73', 'KABUPATEN KEPULAUAN SELAYAR'),
  ('7302', '73', 'KABUPATEN BULUKUMBA'),
  ('7303', '73', 'KABUPATEN BANTAENG');
COMMIT WORK;

BEGIN WORK;
LOCK TABLE districts IN ACCESS EXCLUSIVE MODE;
INSERT INTO districts VALUES
  ('1101010', '1101', 'TEUPAH SELATAN'),
  ('1101020', '1101', 'SIMEULUE TIMUR'),
  ('1101021', '1101', 'TEUPAH BARAT'),
  ('1101022', '1101', 'TEUPAH TENGAH'),

  ('1102010', '1102', 'PULAU BANYAK'),
  ('1102011', '1102', 'PULAU BANYAK BARAT'),
  ('1102020', '1102', 'SINGKIL'),
  ('1102021', '1102', 'SINGKIL UTARA'),

  ('1103010', '1103', 'TRUMON'),
  ('1103011', '1103', 'TRUMON TIMUR'),
  ('1103012', '1103', 'TRUMON TENGAH'),
  ('1103020', '1103', 'BAKONGAN'),

  ('1273010', '1273', 'SIANTAR MARIHAT'),
  ('1273011', '1273', 'SIANTAR MARIMBUN'),
  ('1273020', '1273', 'SIANTAR SELATAN'),
  ('1273030', '1273', 'SIANTAR BARAT'),

  ('1274010', '1274', 'PADANG HULU'),
  ('1274011', '1274', 'TEBING TINGGI KOTA'),
  ('1274020', '1274', 'RAMBUTAN'),
  ('1274021', '1274', 'BAJENIS'),

  ('1275010', '1275', 'MEDAN TUNTUNGAN'),
  ('1275020', '1275', 'MEDAN JOHOR'),
  ('1275030', '1275', 'MEDAN AMPLAS'),
  ('1275040', '1275', 'MEDAN DENAI'),

  ('3201010', '3201', 'NANGGUNG'),
  ('3201020', '3201', 'LEUWILIANG'),
  ('3201021', '3201', 'LEUWISADENG'),
  ('3201030', '3201', 'PAMIJAHAN'),

  ('3202010', '3202', 'CIEMAS'),
  ('3202020', '3202', 'CIRACAP'),
  ('3202021', '3202', 'WALURAN'),
  ('3202030', '3202', 'SURADE'),

  ('3203010', '3203', 'AGRABINTA'),
  ('3203011', '3203', 'LELES'),
  ('3203020', '3203', 'SINDANGBARANG'),
  ('3203030', '3203', 'CIDAUN'),

  ('3301010', '3301', 'DAYEUHLUHUR'),
  ('3301020', '3301', 'WANAREJA'),
  ('3301030', '3301', 'MAJENANG'),
  ('3301040', '3301', 'CIMANGGU'),

  ('3302010', '3302', 'LUMBIR'),
  ('3302020', '3302', 'WANGON'),
  ('3302030', '3302', 'JATILAWANG'),
  ('3302040', '3302', 'RAWALO'),

  ('3303010', '3303', 'KEMANGKON'),
  ('3303020', '3303', 'BUKATEJA'),
  ('3303030', '3303', 'KEJOBONG'),
  ('3303040', '3303', 'PENGADEGAN'),

  ('3401010', '3401', 'TEMON'),
  ('3401020', '3401', 'WATES'),
  ('3401030', '3401', 'PANJATAN'),
  ('3401040', '3401', 'GALUR'),

  ('3402010', '3402', 'SRANDAKAN'),
  ('3402020', '3402', 'SANDEN'),
  ('3402030', '3402', 'KRETEK'),
  ('3402040', '3402', 'PUNDONG'),

  ('3403010', '3403', 'PANGGANG'),
  ('3403011', '3403', 'PURWOSARI'),
  ('3403020', '3403', 'PALIYAN'),
  ('3403030', '3403', 'SAPTO SARI'),

  ('3501010', '3501', 'DONOROJO'),
  ('3501020', '3501', 'PUNUNG'),
  ('3501030', '3501', 'PRINGKUKU'),
  ('3501040', '3501', 'PACITAN'),

  ('3502010', '3502', 'NGRAYUN'),
  ('3502020', '3502', 'SLAHUNG'),
  ('3502030', '3502', 'BUNGKAL'),
  ('3502040', '3502', 'SAMBIT'),

  ('3503010', '3503', 'PANGGUL'),
  ('3503020', '3503', 'MUNJUNGAN'),
  ('3503030', '3503', 'WATULIMO'),
  ('3503040', '3503', 'KAMPAK'),

  ('7301010', '7301', 'PASIMARANNU'),
  ('7301011', '7301', 'PASILAMBENA'),
  ('7301020', '7301', 'PASIMASSUNGGU'),
  ('7301021', '7301', 'TAKABONERATE'),

  ('7302010', '7302', 'GANTARANG'),
  ('7302020', '7302', 'UJUNG BULU'),
  ('7302021', '7302', 'UJUNG LOE'),
  ('7302030', '7302', 'BONTO BAHARI'),

  ('7303010', '7303', 'BISSAPPU'),
  ('7303011', '7303', 'ULUERE'),
  ('7303012', '7303', 'SINOA'),
  ('7303020', '7303', 'BANTAENG');
COMMIT WORK;

BEGIN WORK;
LOCK TABLE offices IN ACCESS EXCLUSIVE MODE;
INSERT INTO offices VALUES
(DEFAULT,1101010,'TEUPAH SELATAN OFFICE A'),
(DEFAULT,1101020,'SIMEULUE TIMUR OFFICE A'),
(DEFAULT,1101021,'TEUPAH BARAT OFFICE A'),
(DEFAULT,1101022,'TEUPAH TENGAH OFFICE A'),

(DEFAULT,1102010,'PULAU BANYAK OFFICE A'),
(DEFAULT,1102011,'PULAU BANYAK BARAT OFFICE A'),
(DEFAULT,1102020,'SINGKIL OFFICE A'),
(DEFAULT,1102021,'SINGKIL UTARA OFFICE A'),

(DEFAULT,1103010,'TRUMON OFFICE A'),
(DEFAULT,1103011,'TRUMON TIMUR OFFICE A'),
(DEFAULT,1103012,'TRUMON TENGAH OFFICE A'),
(DEFAULT,1103020,'BAKONGAN OFFICE A'),

(DEFAULT,1273010,'SIANTAR MARIHAT OFFICE A'),
(DEFAULT,1273011,'SIANTAR MARIMBUN OFFICE A'),
(DEFAULT,1273020,'SIANTAR SELATAN OFFICE A'),
(DEFAULT,1273030,'SIANTAR BARAT OFFICE A'),

(DEFAULT,1274010,'PADANG HULU OFFICE A'),
(DEFAULT,1274011,'TEBING TINGGI KOTA OFFICE A'),
(DEFAULT,1274020,'RAMBUTAN OFFICE A'),
(DEFAULT,1274021,'BAJENIS OFFICE A'),

(DEFAULT,1275010,'MEDAN TUNTUNGAN OFFICE A'),
(DEFAULT,1275020,'MEDAN JOHOR OFFICE A'),
(DEFAULT,1275030,'MEDAN AMPLAS OFFICE A'),
(DEFAULT,1275040,'MEDAN DENAI OFFICE A'),

(DEFAULT,3201010,'NANGGUNG OFFICE A'),
(DEFAULT,3201020,'LEUWILIANG OFFICE A'),
(DEFAULT,3201021,'LEUWISADENG OFFICE A'),
(DEFAULT,3201030,'PAMIJAHAN OFFICE A'),

(DEFAULT,3202010,'CIEMAS OFFICE A'),
(DEFAULT,3202020,'CIRACAP OFFICE A'),
(DEFAULT,3202021,'WALURAN OFFICE A'),
(DEFAULT,3202030,'SURADE OFFICE A'),

(DEFAULT,3203010,'AGRABINTA OFFICE A'),
(DEFAULT,3203011,'LELES OFFICE A'),
(DEFAULT,3203020,'SINDANGBARANG OFFICE A'),
(DEFAULT,3203030,'CIDAUN OFFICE A'),

(DEFAULT,3301010,'DAYEUHLUHUR OFFICE A'),
(DEFAULT,3301020,'WANAREJA OFFICE A'),
(DEFAULT,3301030,'MAJENANG OFFICE A'),
(DEFAULT,3301040,'CIMANGGU OFFICE A'),

(DEFAULT,3302010,'LUMBIR OFFICE A'),
(DEFAULT,3302020,'WANGON OFFICE A'),
(DEFAULT,3302030,'JATILAWANG OFFICE A'),
(DEFAULT,3302040,'RAWALO OFFICE A'),

(DEFAULT,3303010,'KEMANGKON OFFICE A'),
(DEFAULT,3303020,'BUKATEJA OFFICE A'),
(DEFAULT,3303030,'KEJOBONG OFFICE A'),
(DEFAULT,3303040,'PENGADEGAN OFFICE A'),

(DEFAULT,3401010,'TEMON OFFICE A'),
(DEFAULT,3401020,'WATES OFFICE A'),
(DEFAULT,3401030,'PANJATAN OFFICE A'),
(DEFAULT,3401040,'GALUR OFFICE A'),

(DEFAULT,3402010,'SRANDAKAN OFFICE A'),
(DEFAULT,3402020,'SANDEN OFFICE A'),
(DEFAULT,3402030,'KRETEK OFFICE A'),
(DEFAULT,3402040,'PUNDONG OFFICE A'),

(DEFAULT,3403010,'PANGGANG OFFICE A'),
(DEFAULT,3403011,'PURWOSARI OFFICE A'),
(DEFAULT,3403020,'PALIYAN OFFICE A'),
(DEFAULT,3403030,'SAPTO SARI OFFICE A'),

(DEFAULT,3501010,'DONOROJO OFFICE A'),
(DEFAULT,3501020,'PUNUNG OFFICE A'),
(DEFAULT,3501030,'PRINGKUKU OFFICE A'),
(DEFAULT,3501040,'PACITAN OFFICE A'),

(DEFAULT,3502010,'NGRAYUN OFFICE A'),
(DEFAULT,3502020,'SLAHUNG OFFICE A'),
(DEFAULT,3502030,'BUNGKAL OFFICE A'),
(DEFAULT,3502040,'SAMBIT OFFICE A'),

(DEFAULT,3503010,'PANGGUL OFFICE A'),
(DEFAULT,3503020,'MUNJUNGAN OFFICE A'),
(DEFAULT,3503030,'WATULIMO OFFICE A'),
(DEFAULT,3503040,'KAMPAK OFFICE A'),

(DEFAULT,7301010,'PASIMARANNU OFFICE A'),
(DEFAULT,7301011,'PASILAMBENA OFFICE A'),
(DEFAULT,7301020,'PASIMASSUNGGU OFFICE A'),
(DEFAULT,7301021,'TAKABONERATE OFFICE A'),

(DEFAULT,7302010,'GANTARANG OFFICE A'),
(DEFAULT,7302020,'UJUNG BULU OFFICE A'),
(DEFAULT,7302021,'UJUNG LOE OFFICE A'),
(DEFAULT,7302030,'BONTO BAHARI OFFICE A'),

(DEFAULT,7303010,'BISSAPPU OFFICE A'),
(DEFAULT,7303011,'ULUERE OFFICE A'),
(DEFAULT,7303012,'SINOA OFFICE A'),
(DEFAULT,7303020,'BANTAENG OFFICE A');
COMMIT WORK;

BEGIN WORK;
LOCK TABLE users IN ACCESS EXCLUSIVE MODE;
INSERT INTO users VALUES
  (DEFAULT, 1101010, 'admin', 'admin', 'admin@admin.com', '$2a$10$e/UN0TNvdKqfsyl3VUV.bOlel8NONM/K4Uc/f2xr0BxEE9s6Eam.6'), -- pass: admin
  (DEFAULT, 3203010, 'mod', 'mod', 'mod@mod.com', '$2a$10$gdeAa0kfprzsPYlKOjbPN.PVLxovOVbM35UnyL3IqiPGdfjJVwIeq'), -- pass: mod
  (DEFAULT, 7303020, 'user', 'user', 'user@user.com', '$2a$10$v/dLYQlcDP0O.5FqA9Ux/eyhYpdqrj8Lmi0VylkIGbuBYIVRqNGOa');  -- pass: user
COMMIT WORK;




-- -- create 'offices' table
-- CREATE TABLE IF NOT EXISTS offices (
-- 	id serial PRIMARY KEY,
--   district_id integer,
--   name VARCHAR (255) UNIQUE NOT NULL,
--   created_at timestamp DEFAULT CURRENT_TIMESTAMP,
--   updated_at timestamp DEFAULT CURRENT_TIMESTAMP,
--   deleted_at timestamp ,
--   FOREIGN KEY (district_id)
--   REFERENCES districts(id)
--   ON DELETE CASCADE
-- );
-- CREATE INDEX offices_id_index
-- ON offices(district_id);

-- -- create 'users' table
-- CREATE TABLE IF NOT EXISTS users (
-- 	id serial PRIMARY KEY,
--   district_id integer,
--   first_name VARCHAR (255) NOT NULL,
--   last_name VARCHAR (255) NOT NULL,
--   email VARCHAR (255) UNIQUE NOT NULL,
--   password VARCHAR (255) NOT NULL,
--   created_at timestamp DEFAULT CURRENT_TIMESTAMP,
--   updated_at timestamp DEFAULT CURRENT_TIMESTAMP,
--   deleted_at timestamp ,
--   FOREIGN KEY (district_id)
--   REFERENCES districts(id)
--   ON DELETE CASCADE
-- );
-- CREATE INDEX users_id_index
-- ON users(district_id);